(this.webpackJsonpcalendar=this.webpackJsonpcalendar||[]).push([[0],{36:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(7),o=n.n(a),c=n(26),i=n.n(c),r=n(0),s=n.n(r),d=n(2),l=n(8),u=n(9),j=n.n(u),h=(n(36),n(15)),p=n(3);var b=function(e){var t=e.todo,n=e.onDelete,a=e.onToggle,o=e.editTodo;return Object(p.jsx)("div",{className:"todo",children:Object(p.jsxs)("div",{className:"".concat(!0===t.done?"reminder":""),children:[Object(p.jsxs)("div",{className:"todo-click-box",onClick:function(){o(t)},children:[Object(p.jsx)("span",{className:"todo-text",children:t.text}),Object(p.jsx)("span",{className:"todo-time_date",children:t.time}),Object(p.jsx)("span",{className:"todo-time_date",children:t.date})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)(h.a,{style:{color:"#777777",cursor:"pointer",fontSize:"1.1rem"},onClick:function(){return a({id:t._id,done:t.done})}}),Object(p.jsx)(h.d,{style:{color:"#777777",cursor:"pointer",marginLeft:"1px",marginRight:"-5px"},onClick:function(){return n(t._id)}})]})]})})};var m=function(e){var t=e.todos,n=e.onDelete,a=e.onToggle,o=e.editTodo;return void 0===t?Object(p.jsx)("div",{className:"aside-container alltodos-container loading",children:"Loading..."}):Object(p.jsxs)("div",{className:"aside-container alltodos-container",children:[Object(p.jsx)("h1",{children:"All Todos"}),t.sort((function(e,t){return j()(t.date,"DD-MM-YYYY")<j()(e.date,"DD-MM-YYYY")?1:-1})).filter((function(e){return!1===e.done})).map((function(e){return Object(p.jsx)(b,{todo:e,onDelete:n,onToggle:a,editTodo:o},e._id)}))]})};var f=function(e){var t,n=e.day,a=e.api,o=e.month,c=e.clickedDay,i=e.colorDayHandler,r=e.todos,s=j()().format("DD-MM-YYYY");if(t="31"===n?31:j()(n,"DD-MM-YYYY").format("D"),void 0===r)return Object(p.jsx)("div",{});var d=n+"-"+o,l=0,u=j()(d,"DD-MM-YYYY").format("YYYY-MM-DD");return Object(p.jsxs)("div",{onMouseDown:function(e){document.querySelectorAll("*").forEach((function(e){e.classList.remove("clickedday")}))},onClick:function(e){if(10===e.target.id.length){var t=e.target.id,n={date:t.slice(-2),year:t.slice(-7,-2),mon:t.replace(/ .*/,""),id:e.target.id};c(n),i(t)}else{var a=e.target.parentNode.id,o={date:a.slice(-2),year:a.slice(-7,-2),mon:a.replace(/ .*/,""),id:e.target.parentNode.id};c(o),i(a)}},id:d,className:"".concat(d===s?"days-day_cont currentday":"days-day_cont"),children:[Object(p.jsxs)("h3",{children:[t,a.filter((function(e){return e.datum===u})).map((function(e){return Object(p.jsx)("span",{className:"days-api",children:e.helgdag},e.datum)}))]}),r.sort((function(e,t){return t.time<e.time?1:-1})).filter((function(e){return e.date===d})).map((function(e){return l++,Object(p.jsxs)("div",{className:"inline day-todo",children:[Object(p.jsx)("span",{className:"dot",children:"\u30fb"}),e.text]},e._id)})),Object(p.jsx)("div",{className:"days-todo_count",children:0===l?"":l+" Todo:"})]})},O=n(27),g=n.n(O);var x=function(){return Object(p.jsx)(g.a,{type:"spin",color:"rgb(241, 136, 139)",height:"15%",width:"15%",className:"loading"})};j.a.updateLocale("sv",{week:{dow:1}});var v=function(e){for(var t=e.days,n=e.firstDayOfMonth,o=parseInt(n,10),c=[],i=0;i<o;i++)c.push(i);var r=j.a.weekdaysShort(!0).map((function(e){return Object(p.jsx)("div",{className:"weekdays-day_cont",children:e},e)})),s=function(t){e.clickedDay(t)},d=Object(a.useState)(""),u=Object(l.a)(d,2),h=u[0],b=u[1],m=function(e){b(e)};return Object(a.useEffect)((function(){""!==h&&document.getElementById(h).classList.add("clickedday")}),[h]),Object(p.jsxs)("section",{className:"calendar-container",children:[Object(p.jsx)("div",{className:"weekdays-container",children:r}),Object(p.jsxs)("div",{className:"days-container",children:[c.map((function(e,t){return Object(p.jsx)("div",{className:"days-day_cont empty"},t)})),void 0!==t?t.map((function(t){return Object(p.jsx)(f,{month:e.monthInNr,day:t,api:e.api,clickedDay:s,colorDayHandler:m,todos:e.todos},e.monthInNr+t)})):Object(p.jsx)(x,{})]})]})};var y=function(e){var t=j()(e.month,"MM-YYYY").format("MMMM YYYY"),n=e.user.split(" ")[0];return Object(p.jsxs)("header",{children:[Object(p.jsxs)("div",{className:"header-name_btn",children:[Object(p.jsx)("div",{className:"header-username",children:n}),Object(p.jsx)("button",{onClick:e.logOutHandler,className:"logOutBtn",children:"Sign out"})]}),Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)(h.b,{type:"submit",onClick:function(){e.changeMonth("back")},className:"header-arrow"}),Object(p.jsx)("h1",{children:t}),Object(p.jsx)(h.c,{type:"submit",onClick:function(){e.changeMonth("forward")},className:"header-arrow"})]})]})};var N=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(""),r=Object(l.a)(i,2),s=r[0],d=r[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:function(t){var n={text:o,time:s};t.preventDefault(),e.inputToDo(n),c(""),d(),document.getElementById("appt").value=""},children:[Object(p.jsx)("input",{onChange:function(e){c(e.target.value)},type:"text",value:o,placeholder:"New Todo",id:"newTodoInput",maxLength:"20",required:!0}),Object(p.jsx)("input",{type:"time",id:"appt",name:"appt",onChange:function(e){d(e.target.value)}}),Object(p.jsx)("button",{type:"submit",id:"newTodoBtn",children:"+"})]})})};var Y=function(e){var t=e.clickedDay,n=e.todos,a=e.onDelete,o=e.onToggle,c=e.editTodo,i=j()(t,"DD-MM-YYYY").format("D MMMM YY");return void 0===n?Object(p.jsx)("div",{className:"aside-container loading",children:"Loading..."}):Object(p.jsxs)("article",{className:"today-todo_container",children:[Object(p.jsx)("h1",{children:i}),n.sort((function(e,t){return t.time<e.time?1:-1})).filter((function(e){return e.date===t})).map((function(e){return Object(p.jsx)("div",{className:"todo",children:Object(p.jsxs)("div",{className:"".concat(!0===e.done?"reminder":""),children:[Object(p.jsxs)("div",{className:"todo-click-box",onClick:function(){c(e)},children:[e.text,"  ",Object(p.jsx)("span",{className:"todo-time_date",children:e.time}),Object(p.jsx)("span",{className:"todo-time_date",children:e.date})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)(h.a,{style:{color:"#777777",cursor:"pointer",fontSize:"1.1rem"},onClick:function(){return o({id:e._id,done:e.done})}}),Object(p.jsx)(h.d,{style:{color:"#777777",cursor:"pointer",marginLeft:"1px",marginRight:"-5px"},onClick:function(){return a(e._id)}})]})]})},e._id)}))]})},M=n(28),k=n(19),S=Object(M.a)({apiKey:"AIzaSyD4BmnBTW_K0SafcJlIwHPz3WPwv_IGLqo",authDomain:"calendar-mathildap.firebaseapp.com",projectId:"calendar-mathildap",storageBucket:"calendar-mathildap.appspot.com",messagingSenderId:"90331989830",appId:"1:90331989830:web:75f7f81560ce72325b0747"}),w=Object(k.b)(S);var D=function(e){var t=e.userInfo,n=e.newUserInfo,o=e.errorMsg,c=e.emailExist,i=e.googleLogin,r=Object(a.useState)(""),u=Object(l.a)(r,2),j=u[0],h=u[1],b=Object(a.useState)(""),m=Object(l.a)(b,2),f=m[0],O=m[1],g=Object(a.useState)(!0),x=Object(l.a)(g,2),v=x[0],y=x[1],N=Object(a.useState)(""),Y=Object(l.a)(N,2),M=Y[0],S=Y[1],D=Object(a.useState)(""),C=Object(l.a)(D,2),I=C[0],E=C[1],L=Object(a.useState)(""),_=Object(l.a)(L,2),T=_[0],J=_[1];function q(){return(q=Object(d.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new k.a,e.prev=1,e.next=4,Object(k.c)(w,t);case 4:n=e.sent,a={email:n.user.email,userName:n.user.displayName},i(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(p.jsx)(p.Fragment,{children:v?Object(p.jsx)("div",{className:"login-page",children:Object(p.jsx)("div",{id:"logInContainer",children:Object(p.jsx)("div",{id:"logInInputs",children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({email:j,password:f})},children:[Object(p.jsx)("input",{type:"email",placeholder:"EMAIL",id:"userName",className:"logInField",onChange:function(e){h(e.target.value.toLowerCase())},value:j,required:!0}),Object(p.jsx)("input",{type:"password",placeholder:"PASSWORD",id:"passWord",className:"logInField",onChange:function(e){O(e.target.value)},value:f,required:!0}),Object(p.jsx)("div",{className:"eye-icon",onClick:function(){var e=document.getElementById("passWord");"password"===e.type?e.type="text":e.type="password"},children:"Show password"}),o?Object(p.jsx)("p",{id:"errorMsg",children:"Sorry, invalid login!"}):"",Object(p.jsx)("button",{type:"submit",id:"logInBtn",children:"Sign in"}),Object(p.jsx)("p",{onClick:function(){return y(!v)},id:"signUp",children:"Create account"}),Object(p.jsx)("hr",{}),Object(p.jsx)("h4",{children:"OR"}),Object(p.jsxs)("div",{className:"google-btn",onClick:function(){return q.apply(this,arguments)},children:[Object(p.jsx)("div",{className:"google-icon-wrapper",children:Object(p.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google icon"})}),Object(p.jsx)("p",{className:"btn-text",children:Object(p.jsx)("b",{children:"Sign in with google"})})]})]})})})}):Object(p.jsx)("div",{className:"login-page",children:Object(p.jsx)("div",{id:"newLogInContainer",children:Object(p.jsx)("div",{id:"logInInputs",children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n({userName:M,email:I,passWord:T})},children:[Object(p.jsx)("input",{type:"text",placeholder:"CHOOSE NAME",id:"newUserName",className:"logInField",required:"required",onChange:function(e){return S(e.target.value)},value:M}),Object(p.jsx)("input",{type:"email",placeholder:"CHOOSE EMAIL",id:"newEmail",className:"logInField",required:"required",onChange:function(e){return E(e.target.value.toLowerCase())},value:I}),Object(p.jsx)("input",{type:"password",placeholder:"CHOOSE PASSWORD",id:"newPassWord",className:"logInField",required:"required",onChange:function(e){return J(e.target.value)},value:T}),Object(p.jsx)("div",{className:"eye-icon new-icon",onClick:function(){var e=document.getElementById("newPassWord");"password"===e.type?e.type="text":e.type="password"},children:"Show password"}),c?Object(p.jsx)("p",{id:"errorMsg",children:"Email already exist!"}):"",Object(p.jsx)("button",{id:"createAccount",children:"Create account"}),Object(p.jsx)("p",{onClick:function(){return y(!v)},id:"signUp",children:"Have an account? Sign in"})]})})})})})};var C=function(e){var t=e.notes,n=e.onDelete;return void 0===t?Object(p.jsx)("div",{className:"aside-container loading",children:"Loading..."}):Object(p.jsxs)("article",{className:"today-todo_container",children:[Object(p.jsx)("h1",{children:"Notes"}),t.map((function(e){return Object(p.jsx)("div",{className:"todo",children:Object(p.jsxs)("div",{children:[e.note,"  ",Object(p.jsx)("div",{children:Object(p.jsx)(h.d,{style:{color:"#777777",cursor:"pointer",marginLeft:"1px",marginRight:"-5px"},onClick:function(){return n(e._id)}})})]})},e._id)}))]})};var I=function(e){var t=e.newNote,n=Object(a.useState)(""),o=Object(l.a)(n,2),c=o[0],i=o[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:function(e){var n=c;e.preventDefault(),t(n),i("")},children:[Object(p.jsx)("input",{onChange:function(e){i(e.target.value)},type:"text",value:c,placeholder:"New Note",id:"newNoteInput",required:!0}),Object(p.jsx)("button",{type:"submit",id:"newTodoBtn",children:"+"})]})})},E=n(1),L=n(25);var _=function(e){var t=e.todo,n=e.updatedTodo,o=e.closeEdit,c=Object(a.useState)(t),i=Object(l.a)(c,2),r=i[0],s=i[1],d=Object(a.useRef)();Object(a.useEffect)((function(){var e=function(e){d.current.contains(e.target)||o("")};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}));var u=function(e){s((function(t){return Object(L.a)(Object(L.a)({},t),{},Object(E.a)({},e.target.id,e.target.value))}))};return Object(p.jsx)("div",{className:"edit-container",ref:d,children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(r)},children:[Object(p.jsx)("input",{type:"text",value:r.text,onChange:u,id:"text"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"time",value:r.time,onChange:u,id:"time"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"text",value:r.date,onChange:u,id:"date"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"submit",children:"Save"})]})})};j.a.updateLocale("sv",{week:{dow:1}});var T=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(),i=Object(l.a)(c,2),r=i[0],u=i[1],h=Object(a.useState)(),b=Object(l.a)(h,2),f=b[0],O=b[1],g=Object(a.useState)(j()().format("MM-YYYY")),x=Object(l.a)(g,2),M=x[0],S=x[1],E=function(e){var t=j()(e,"MM-YYYY").add(-1,"month").format("MM-YYYY"),n=j()(M,"MM-YYYY").add(-1,"month").format("MM-YYYY");return S(n),t},L=function(e){var t=j()(e,"MM-YYYY").add(1,"month").format("MM-YYYY"),n=j()(M,"MM-YYYY").add(1,"month").format("MM-YYYY");return S(n),t},T=Object(a.useState)(M.slice(-4)),J=Object(l.a)(T,2),q=J[0],B=J[1],A=Object(a.useState)([]),H=Object(l.a)(A,2),W=H[0],F=H[1];Object(a.useEffect)((function(){var e,t="";e=M.slice(0,2),B(M.slice(-4)),fetch(t+="https://sholiday.faboul.se/dagar/v2.1/"+q+"/"+e).then((function(e){return e.json()})).then((function(e){F(e.dagar)})).catch((function(e){console.log(e)}))}),[M]);var R=Object(a.useState)([]),P=Object(l.a)(R,2),U=P[0],z=P[1],G=Object(a.useState)(j()()),K=Object(l.a)(G,2),Q=K[0],V=K[1];Object(a.useEffect)((function(){!function(){var e=Array.from({length:j()(M,"MM").daysInMonth()},(function(e,t){return j()(M,"MM").startOf("month").add(t,"days").format("DD")}));z(e)}(),function(){var e=j()(M,"MM-YYYY").startOf("month").add(-1,"days").format("d");V(e)}()}),[M]);var X=Object(a.useState)(j()().format("DD-MM-YYYY")),Z=Object(l.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(j()().format("DD-MM-YYYY")),ne=Object(l.a)(te,2),ae=ne[0],oe=ne[1],ce=Object(a.useState)(),ie=Object(l.a)(ce,2),re=ie[0],se=ie[1];function de(){return(de=Object(d.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,e.prev=1,e.next=4,fetch("https://calendar-backend-mathildap.herokuapp.com/get",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({userId:t})}).then((function(e){return e.json()}));case 4:a=e.sent,se(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){de.apply(this,arguments)}()}),[n]);var le=function(e){var t={id:e,userId:n.id};fetch("https://calendar-backend-mathildap.herokuapp.com/delete",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){se(e)}))},ue=function(e){var t;t=!0!==e.done;var a={id:e.id,done:t,userId:n.id};fetch("https://calendar-backend-mathildap.herokuapp.com/update",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){se(e)}))},je=Object(a.useState)(""),he=Object(l.a)(je,2),pe=he[0],be=he[1],me=function(e){be(e)},fe=Object(a.useState)(),Oe=Object(l.a)(fe,2),ge=Oe[0],xe=Oe[1];return Object(a.useEffect)((function(){var e=n.id;fetch("https://calendar-backend-mathildap.herokuapp.com/notes/get",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(e){return xe(e)}))}),[n]),Object(p.jsx)("main",{children:""===n?Object(p.jsx)(D,{userInfo:function(e){fetch("https://calendar-backend-mathildap.herokuapp.com/users",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({info:e})}).then((function(e){return e.json()})).then((function(e){"error"!==e?(o({userName:e.username,id:e.id}),u()):u("error")}))},newUserInfo:function(e){fetch("https://calendar-backend-mathildap.herokuapp.com/users/new",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({newUser:e})}).then((function(e){return e.json()})).then((function(e){"email exist"!==e?(o({userName:e.username,id:e.id}),O()):O("email exist")}))},googleLogin:function(e){fetch("https://calendar-backend-mathildap.herokuapp.com/users/googleLogin",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({info:e})}).then((function(e){return e.json()})).then((function(e){var t={userName:e.username,id:e.id,googleLogin:e.googleLogin};o(t)})).catch((function(e){return console.log(e)}))},errorMsg:r,emailExist:f}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{month:M,changeMonth:function(e){if("back"===e){var t=E(M);S(t)}else if("forward"===e){var n=L(M);S(n)}},user:n.userName,logOutHandler:function(){o(""),!0===n.googleLogin&&(console.log("google logout"),Object(k.d)(w))}}),Object(p.jsxs)("section",{className:"main-container",children:[Object(p.jsx)(v,{monthInNr:M,days:U,api:W,firstDayOfMonth:Q,clickedDay:function(e){oe(e.id),ee(e.id)},todos:re,onDelete:le,onToggle:ue}),Object(p.jsxs)("aside",{children:[Object(p.jsxs)("div",{className:"aside-container",children:[Object(p.jsx)(Y,{clickedDay:$,todos:re,onDelete:le,onToggle:ue,editTodo:me}),Object(p.jsx)(N,{clickedDay:$,inputToDo:function(e){var t={userId:n.id,text:e.text,time:e.time,date:ae,done:!1};fetch("https://calendar-backend-mathildap.herokuapp.com/new",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return se(e)}))}})]}),Object(p.jsxs)("div",{className:"aside-container",children:[Object(p.jsx)(C,{notes:ge,onDelete:function(e){var t={id:e,userId:n.id};fetch("https://calendar-backend-mathildap.herokuapp.com/notes/delete",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){xe(e)}))}}),Object(p.jsx)(I,{newNote:function(e){var t={userId:n.id,note:e,done:!1};fetch("https://calendar-backend-mathildap.herokuapp.com/notes/newNote",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){xe(e)}))}})]}),Object(p.jsx)(m,{todos:re,onDelete:le,onToggle:ue,editTodo:me})]})]}),""===pe?"":Object(p.jsx)(_,{todo:pe,updatedTodo:function(e){console.log(e),fetch("https://calendar-backend-mathildap.herokuapp.com/edit",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){se(e),be("")}))},closeEdit:function(){return be("")}})]})})};i.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(T,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.3f399c7a.chunk.js.map